name: Run Playwright Tests

on: push

jobs:
    playwright-tests:
        name: Playwright Tests
        runs-on: ubuntu-latest

        steps:
          - name: Checkout repository
            uses: actions/checkout@v4

          - name: Set up Java
            uses: actions/setup-java@v4
            with:
              distribution: 'temurin'
              java-version: '21'

          - name : Build & Install
            run: mvn -B install -D skipTests --no-transfer-progress

          - name: Install Playwright Browsers
            run: mvn exec:java -e -D exec.mainClass=com.microsoft.playwright.CLI -Dexec.args="install --with-deps"

          - name: Run tests
            run: mvn test

          - name: Upload Test Results
            uses: actions/upload-artifact@v4
            with:
              name: playwright-test-results
              path:
                target/reports
                target/surefire-reports
